{% load static %}

<!DOCTYPE html> 
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ lesson.description }}">
    <meta name="keywords" content="">
    <link rel="stylesheet" href="{% static 'css/libs.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.min.css' %}">
    <title>Урок</title>
</head>

<body>
    <div class="wrapper">
        <main class="content">

            <section class='lesson-top'>
                <div class='container'>
                    <div class='lesson-top__inner'>
                        <a href="{% url 'lessons:units' %}" class="lesson-top__back">
                            <svg width="33" height="24" viewBox="0 0 33 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0.93934 10.9393C0.353553 11.5251 0.353553 12.4749 0.93934 13.0607L10.4853 22.6066C11.0711 23.1924 12.0208 23.1924 12.6066 22.6066C13.1924 22.0208 13.1924 21.0711 12.6066 20.4853L4.12132 12L12.6066 3.51472C13.1924 2.92893 13.1924 1.97918 12.6066 1.3934C12.0208 0.807612 11.0711 0.807612 10.4853 1.3934L0.93934 10.9393ZM33 10.5L2 10.5V13.5L33 13.5V10.5Z" fill="#9AC2EC"/>
                            </svg>
                            <span>Назад</span>
                        </a>
                        <div class="lesson-top__theme">
                            <span class="lesson-top__badge">тема</span>
                            <span class="lesson-top__title">{{ lesson.unit.title|safe }}</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class='lesson' style="background-image: url({{ lesson.background_image.url }});">
                <div class='container'>
                    <div class='lesson__inner'>
                        <div class="lesson__nav">
                            {% if prev_lesson is not None %}
                            <a href="{% url 'lessons:lesson' prev_lesson.url_pattern %}" style="z-index: 999;" class="lesson__prev">
                                <svg width="47" height="47" viewBox="0 0 47 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M23.4999 10.0714L25.9003 12.4097L16.5338 21.8214H36.9285V25.1786H16.5338L25.9003 34.5333L23.4999 36.9286L10.0713 23.5L23.4999 10.0714Z" fill="#6099EE"/>
                                    <path d="M23.5 47C28.1479 47 32.6913 45.6217 36.5559 43.0395C40.4204 40.4573 43.4325 36.7871 45.2112 32.4931C46.9898 28.199 47.4552 23.4739 46.5484 18.9154C45.6417 14.3568 43.4035 10.1695 40.117 6.883C36.8305 3.59647 32.6432 1.35831 28.0846 0.451556C23.5261 -0.455196 18.801 0.0101822 14.5069 1.78884C10.2129 3.5675 6.54268 6.57955 3.96046 10.4441C1.37825 14.3087 0 18.8521 0 23.5C0.00710678 29.7304 2.48528 35.7036 6.89084 40.1092C11.2964 44.5147 17.2696 46.9929 23.5 47ZM23.5 3.35715C27.4839 3.35715 31.3783 4.53851 34.6908 6.75184C38.0032 8.96516 40.585 12.111 42.1096 15.7917C43.6341 19.4723 44.033 23.5223 43.2558 27.4297C42.4786 31.337 40.5602 34.9261 37.7431 37.7432C34.9261 40.5602 31.337 42.4786 27.4297 43.2558C23.5223 44.033 19.4723 43.6341 15.7917 42.1096C12.111 40.585 8.96515 38.0033 6.75183 34.6908C4.5385 31.3783 3.35714 27.4839 3.35714 23.5C3.36336 18.1597 5.48755 13.0399 9.26371 9.26373C13.0399 5.48756 18.1597 3.36337 23.5 3.35715Z" fill="#B4D1FF"/>
                                </svg>
                            </a>
                            {% elif prev_research is not None %}
                            <a href="{% url 'lessons:research' prev_research.url_pattern %}" style="z-index: 999;" class="lesson__prev">
                                <svg width="47" height="47" viewBox="0 0 47 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M23.4999 10.0714L25.9003 12.4097L16.5338 21.8214H36.9285V25.1786H16.5338L25.9003 34.5333L23.4999 36.9286L10.0713 23.5L23.4999 10.0714Z" fill="#6099EE"/>
                                    <path d="M23.5 47C28.1479 47 32.6913 45.6217 36.5559 43.0395C40.4204 40.4573 43.4325 36.7871 45.2112 32.4931C46.9898 28.199 47.4552 23.4739 46.5484 18.9154C45.6417 14.3568 43.4035 10.1695 40.117 6.883C36.8305 3.59647 32.6432 1.35831 28.0846 0.451556C23.5261 -0.455196 18.801 0.0101822 14.5069 1.78884C10.2129 3.5675 6.54268 6.57955 3.96046 10.4441C1.37825 14.3087 0 18.8521 0 23.5C0.00710678 29.7304 2.48528 35.7036 6.89084 40.1092C11.2964 44.5147 17.2696 46.9929 23.5 47ZM23.5 3.35715C27.4839 3.35715 31.3783 4.53851 34.6908 6.75184C38.0032 8.96516 40.585 12.111 42.1096 15.7917C43.6341 19.4723 44.033 23.5223 43.2558 27.4297C42.4786 31.337 40.5602 34.9261 37.7431 37.7432C34.9261 40.5602 31.337 42.4786 27.4297 43.2558C23.5223 44.033 19.4723 43.6341 15.7917 42.1096C12.111 40.585 8.96515 38.0033 6.75183 34.6908C4.5385 31.3783 3.35714 27.4839 3.35714 23.5C3.36336 18.1597 5.48755 13.0399 9.26371 9.26373C13.0399 5.48756 18.1597 3.36337 23.5 3.35715Z" fill="#B4D1FF"/>
                                </svg>
                            </a>
                            {% else %}
                            <div class="lesson__prev"></div>
                            {% endif %}
                            <div class="lesson__nums">
                                <span class="lesson__nums-title">урок</span>
                                <span class="lesson__nums-badge"> {{ lesson.serial_number }}</span>
                            </div>
                            <div class="lesson__title">{{ lesson.title }}</div>
                            {% if next_lesson is not None %}
                            <a href="{% url 'lessons:lesson' next_lesson.url_pattern %}" style="z-index: 999;" class="lesson__next">
                                <svg width="47" height="47" viewBox="0 0 47 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M23.4999 10.0714L21.0995 12.4097L30.4659 21.8214H10.0713V25.1786H30.4659L21.0995 34.5333L23.4999 36.9286L36.9284 23.5L23.4999 10.0714Z" fill="#6099EE"/>
                                    <path d="M23.5 47C18.8521 47 14.3087 45.6217 10.4441 43.0395C6.57955 40.4573 3.5675 36.7871 1.78884 32.4931C0.0101822 28.199 -0.455196 23.4739 0.451556 18.9154C1.35831 14.3568 3.59647 10.1695 6.883 6.883C10.1695 3.59647 14.3568 1.35831 18.9154 0.451556C23.4739 -0.455196 28.199 0.0101822 32.4931 1.78884C36.7871 3.5675 40.4573 6.57955 43.0395 10.4441C45.6217 14.3087 47 18.8521 47 23.5C46.9929 29.7304 44.5147 35.7036 40.1092 40.1092C35.7036 44.5147 29.7304 46.9929 23.5 47ZM23.5 3.35715C19.5161 3.35715 15.6217 4.53851 12.3092 6.75184C8.99676 8.96516 6.415 12.111 4.89044 15.7917C3.36587 19.4723 2.96698 23.5223 3.74419 27.4297C4.52141 31.337 6.43983 34.9261 9.25686 37.7432C12.0739 40.5602 15.663 42.4786 19.5703 43.2558C23.4777 44.033 27.5277 43.6341 31.2083 42.1096C34.889 40.585 38.0348 38.0033 40.2482 34.6908C42.4615 31.3783 43.6429 27.4839 43.6429 23.5C43.6366 18.1597 41.5125 13.0399 37.7363 9.26373C33.9601 5.48756 28.8403 3.36337 23.5 3.35715Z" fill="#B4D1FF"/>
                                </svg>
                            </a>
                            {% elif next_research is not None %}
                            <a href="{% url 'lessons:research' next_research.url_pattern %}" style="z-index: 999;" class="lesson__next">
                                <svg width="47" height="47" viewBox="0 0 47 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M23.4999 10.0714L21.0995 12.4097L30.4659 21.8214H10.0713V25.1786H30.4659L21.0995 34.5333L23.4999 36.9286L36.9284 23.5L23.4999 10.0714Z" fill="#6099EE"/>
                                    <path d="M23.5 47C18.8521 47 14.3087 45.6217 10.4441 43.0395C6.57955 40.4573 3.5675 36.7871 1.78884 32.4931C0.0101822 28.199 -0.455196 23.4739 0.451556 18.9154C1.35831 14.3568 3.59647 10.1695 6.883 6.883C10.1695 3.59647 14.3568 1.35831 18.9154 0.451556C23.4739 -0.455196 28.199 0.0101822 32.4931 1.78884C36.7871 3.5675 40.4573 6.57955 43.0395 10.4441C45.6217 14.3087 47 18.8521 47 23.5C46.9929 29.7304 44.5147 35.7036 40.1092 40.1092C35.7036 44.5147 29.7304 46.9929 23.5 47ZM23.5 3.35715C19.5161 3.35715 15.6217 4.53851 12.3092 6.75184C8.99676 8.96516 6.415 12.111 4.89044 15.7917C3.36587 19.4723 2.96698 23.5223 3.74419 27.4297C4.52141 31.337 6.43983 34.9261 9.25686 37.7432C12.0739 40.5602 15.663 42.4786 19.5703 43.2558C23.4777 44.033 27.5277 43.6341 31.2083 42.1096C34.889 40.585 38.0348 38.0033 40.2482 34.6908C42.4615 31.3783 43.6429 27.4839 43.6429 23.5C43.6366 18.1597 41.5125 13.0399 37.7363 9.26373C33.9601 5.48756 28.8403 3.36337 23.5 3.35715Z" fill="#B4D1FF"/>
                                </svg>
                            </a>
                            {% else %}
                            <div class="lesson__next"></div>
                            {% endif %}
                        </div>
                        
                        <div class="lesson__images">
                            {% for slide in lesson.slides.all %}
                            {% if forloop.counter0 == 0 %}
                            <div class="lesson__img lesson__img--active" data-delay="{{ slide.delay }}" data-num="{{ forloop.counter }}">
                            {% else %}
                            <div class="lesson__img lesson__img" data-delay="{{ slide.delay }}" data-num="{{ forloop.counter }}">
                            {% endif %}
                                <img src="{{ slide.image.url }}" alt="Изображение слайда {{ forloop.counter }}">
                            </div>
                            {% endfor %}
                        </div>

                        <div class="train">
                            <img src="{% static 'img/lump.webp' %}" alt="Изображение для тренажера" class="lesson__icon train__img">
                            <div class="lesson__subtitle train__title">Тренажёр</div>

                            <div class="train__quiz">
                                <div class="train__question">{{ lesson.trainer.text }}</div>
                                <div class="train__answers">
                                    {% for answer in lesson.trainer.answers.all %}
                                    <div class="train__answer" data-answer="{{ answer.is_true|yesno:'true,false' }}">
                                        <span>{{ answer.text }}</span>
                                        <img src="{% static 'img/check.svg' %}" alt="Изображение для ответа">
                                    </div>
                                    {% endfor %}
                                </div>
                                <div class="train__desc">
                                    <div class="train__desc-wrap">
                                        <div class="train__desc-title">Объяснение</div>
                                        <div class="train__desc-text">
                                            {{ lesson.trainer.explanation|safe }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="interesting">
                            <div class="interesting__wrap">
                                <img src="{% static 'img/lump.webp' %}" alt="Иконка 'Это интересно'" class="lesson__icon interesting__img">
                                <div class="lesson__subtitle interesting__title">Это интересно</div>
                                <div class="interesting__info">
                                    <div class="interesting__img2">
                                        <img src="{{ lesson.interesting_img.url }}" alt="">
                                    </div>
                                    <div class="interesting__text">{{ lesson.interesting_text }}</div>
                                </div>
                            </div>
                        </div>

                        <div class="game">
                            <img src="{% static 'img/game.webp' %}" alt="Икона для игры" class="lesson__icon game__img">
                            <div class="lesson__subtitle game__title">Игра</div>
                            <div class="game__wrap">
                                {% if lesson.game.first_image %}
                                <div class="game__img2">
                                    <img src="{{ lesson.game.first_image.url }}" alt="">
                                </div>
                                {% endif %}
                                {% if lesson.game.second_image %}
                                <div class="game__img2">
                                    <img src="{{ lesson.game.second_image.url }}" alt="">
                                </div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="quiz">
                            <div class="quiz__wrap">
                                <div class="quiz__title">{{ lesson.game.text }}</div>
                                <div class="quiz__answers">
                                    {% for answer in lesson.game.answers.all %}
                                    <div class="quiz__answer" data-answer="{{ answer.is_true|yesno:'true,false' }}">
                                        <span>{{ answer.text }}</span>
                                        <img src="{% static 'img/check.svg' %}" alt="Изображение ответа">
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <div class="fact">
                            <div class="fact__left">
                                <img src="{% static 'img/fact.webp' %}" alt="Иконка факта" class="lesson__icon fact__icon">
                                <div class="lesson__subtitle fact__title">Факт</div>
                            </div>
                            <div class="fact__text">{{ lesson.fact_text }}</div>
                            <div class="fact__img">
                                <img src="{{ lesson.fact_img.url }}" alt="Изображение факта">
                            </div>
                        </div>

                        <div class="detective">
                            <div class="detective__top">
                                <img src="{% static 'img/detective.webp' %}" alt="Иконка практического задания" class="lesson__icon detective__img">
                                <div class="lesson__subtitle detective__title">{{ lesson.practical_title }}</div>
                                <div class="detective__badge">Практическое задание</div>
                            </div>

                            <div class="detective__steps">
                                {% for step in lesson.practical_steps.all %}
                                <div class="detective__step">
                                    <div class="detective__step-num">{{ forloop.counter }}</div>
                                    <div class="detective__step-img">
                                        <img src="{{ step.image.url }}" alt="Изображение шага {{ forloop.counter }} практического задания">
                                    </div>
                                    <div class="detective__step-text">{{ step.text }} </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="additional">
                            <div class="additional__top">
                                <img src="{% static 'img/additional.svg' %}" alt="Иконка дополнительного материала" class="lesson__icon additional__img">
                                <div class="additional__title lesson__subtitle">Дополнительный материал</div>
                            </div>
                            <div class="additional__items">
                                {% for material in lesson.add_materials.all %}
                                <a href="{{ material.url }}" class="additional__item">
                                    <div class="additional__item-img">
                                        <img src="{{ material.image.url }}" alt="Изображение доп. материала {{ forloop.counter }}">
                                    </div>
                                    <div class="additional__item-title">
                                        {{ material.name|safe }}
                                    </div>
                                </a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class='lesson-nav'>
                <div class='container'>
                    <div class='lesson-nav__inner'>
                        <div class="lesson-nav__prev">
                            {% if prev_lesson is not None %}
                            <a href="{% url 'lessons:lesson' prev_lesson.url_pattern %}" class="lesson-nav__link">Предыдущий урок</a>
                            <a href="{% url 'lessons:lesson' prev_lesson.url_pattern %}" class="lesson-card">
                                <div class="lesson-card__img">
                                    <img src="{{ prev_lesson.preview.url }}" alt="Изображение предыдущего урока">
                                </div>
                                <div class="lesson-card__title">{{ prev_lesson.title }}</div>
                                <div class="lesson-card__num">урок {{ prev_lesson.serial_number }}</div>
                            </a>
                            {% elif prev_research is not None %}
                            <a href="{% url 'lessons:research' prev_research.url_pattern %}" class="lesson-nav__link">Предыдущее исследование</a>
                            <a href="{% url 'lessons:research' prev_research.url_pattern %}" class="lesson-card">
                                <div class="lesson-card__img">
                                    <img src="{% static 'img/research.png' %}" alt="Изображение предыдущего исследования">
                                </div>
                                <div class="lesson-card__title">Исследование {{ prev_research.unit.title|safe }}</div>
                            </a>
                            {% endif %}
                        </div>
                        <div class="lesson-nav__next">
                            {% if next_lesson is not None %}
                            <a href="{% url 'lessons:lesson' next_lesson.url_pattern %}" class="lesson-nav__link">Следующий урок</a>
                            <a href="{% url 'lessons:lesson' next_lesson.url_pattern %}" class="lesson-card">
                                <div class="lesson-card__img">
                                    <img src="{{ next_lesson.preview.url }}" alt="Изображение предыдущего урока">
                                </div>
                                <div class="lesson-card__title">{{ next_lesson.title }}</div>
                                <div class="lesson-card__num">урок {{ next_lesson.serial_number }}</div>
                            </a>
                            {% elif next_research is not None %}
                            <a href="{% url 'lessons:research' next_research.url_pattern %}" class="lesson-nav__link">Следующее исследование</a>
                            <a href="{% url 'lessons:research' next_research.url_pattern %}" class="lesson-card">
                                <div class="lesson-card__img">
                                    <img src="{% static 'img/research.png' %}" alt="Изображение следующего исследования">
                                </div>
                                <div class="lesson-card__title">Исследование {{ next_research.unit.title|safe }}</div>
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </section>

        </main>
        <footer class='footer'>
            <div class='container'>
                <div class='footer__inner'>
                    <div class="footer__by">2022 © Экологический дневник</div>
                    <nav class="footer__nav">
                        <a href="{% url 'main:index' %}" class="footer__nav-link">Главная</a>
                        <a href="{% url 'lessons:units' %}" class="footer__nav-link">Уроки</a>
                        <a href="{% url 'main:about' %}" class="footer__nav-link">О проекте</a>
                    </nav>
                </div>
            </div>
        </footer>
    </div>

    <script src="{% static 'js/libs.min.js' %}"></script>
    <script src="{% static 'js/main.min.js' %}"></script>

</body>

</html>
